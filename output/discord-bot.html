<!DOCTYPE html>
<html lang="en">
<head>
 <title>Discord Bot in .NET</title>
 <!-- Latest compiled and minified Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<!--link rel="stylesheet" href="theme/css/rdark.css" /-->
<link rel="stylesheet" type="text/css" href="theme/css/main.css" />

    <!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
        var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
        VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
        VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
        VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
        VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
        });
        MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
        var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
        VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
        VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
        VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
        VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
        });
  </script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</head>
<body>
    
    <title></title>
    
<nav >
  <div class="container" id="navbar">
    <div class="navbar-header">
      <a class="navbar-brand" href="index.html">Portfolio</a>
    </div>
    <ul class="nav navbar-nav">
            <li><b>|</b></li>
            <li>
                <a href="./articles.html">Articles</a></li>
            <li><b>|</b></li>
            <li>
                <a href="./cv.html">CV</a></li>
            <li><b>|</b></li>
            <li>
                <a href="./hobby.html">Hobby</a></li>
    </ul>
  </div>
</nav>
    
    
<!-- Main Content -->
 <div class="container" id="main">
<div class="row">
 <div class="col-md-12">
        <h1><strong>Project Details | </strong>Discord Bot in .NET</h1>
     <br>
     <h4 style="padding-left: 7%; padding-right: 7%;"><p>A Discord Bot developed in C# using the .NET Wrapper</p></h4>
     
     
     <div class="content">
         <hr style="border-width: thin; border-color: black">
         
        <p>
            <img src="theme/img/date3.png" style="height:25px" class="icon">  
            <strong> | Project Year -- </strong> 2020</p>
         <p>
                <img src="theme/img/skills2.png" style="height:25px" class="icon">             
             <strong> | Tags -- </strong>
        <a href="./c.html">c#</a> | 
        <a href="./json.html">json</a> | 
        <a href="./bots.html">bots</a> | 
        <a href="./discord.html">discord</a> | 
        <a href="./mysql.html">mysql</a> | 
    </p>
     


    


         
        
         
         
                <p><a target="_blank" href="https://github.com/ThomB93/DiscordBot" class="icons">
                    <img src="theme/img/github.png" style="height:25px" class="icon"></a>
                    <strong> | Repository -- </strong> <a target="_blank" href="https://github.com/ThomB93/DiscordBot">https://github.com/ThomB93/DiscordBot</a></p>
         
         <hr style="border-width: thin; border-color: black; padding-bottom: 4%;">

         <p><p>This bot was made using the unofficial .NET wrapper for the Discord API. More information about the wrapper can be found on the <a href="https://github.com/discord-net/Discord.Net">Github repo</a></p>
<p>In its simplest form, the bot makes use of the command service provided by the Discord Client to accept requests from users. All messages that match the specified prefix + alias will execute some function that the bot provides. As an example, here is a command that prints out a random trivia question to the user:</p>
<div class="highlight"><pre><span></span><code><span class="n">commands</span><span class="p">.</span><span class="n">CreateCommand</span><span class="p">(</span><span class="s">&quot;trivia&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="n">Alias</span><span class="p">(</span><span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;question&quot;</span><span class="p">})</span> 
    <span class="p">.</span><span class="n">Description</span><span class="p">(</span><span class="s">&quot;Provides a random question. !trivia [categoryId] [value]&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s">&quot;categoryId&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">Required</span><span class="p">)</span>
    <span class="p">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">Required</span><span class="p">)</span> 
    <span class="p">.</span><span class="n">Do</span><span class="p">(</span><span class="k">async</span> <span class="n">e</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">JsonQuestion</span> <span class="n">question</span> <span class="p">=</span> <span class="k">new</span> <span class="n">JsonQuestion</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">GetArg</span><span class="p">(</span><span class="m">0</span><span class="p">),</span> <span class="n">Convert</span><span class="p">.</span><span class="n">ToInt32</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">GetArg</span><span class="p">(</span><span class="m">1</span><span class="p">)));</span>
        <span class="n">DataContainer</span> <span class="n">container</span> <span class="p">=</span> <span class="n">question</span><span class="p">.</span><span class="n">GetQuestions</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">listLength</span> <span class="p">=</span> <span class="n">container</span><span class="p">.</span><span class="n">Questions</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
        <span class="n">Random</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Random</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">rand</span> <span class="p">=</span> <span class="n">r</span><span class="p">.</span><span class="n">Next</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">listLength</span><span class="p">);</span> 
        <span class="k">await</span> <span class="n">e</span><span class="p">.</span><span class="n">Channel</span><span class="p">.</span><span class="n">SendMessage</span><span class="p">(</span><span class="n">container</span><span class="p">.</span><span class="n">Questions</span><span class="p">[</span><span class="n">rand</span><span class="p">].</span><span class="n">question</span><span class="p">);</span>

        <span class="n">discord</span><span class="p">.</span><span class="n">MessageReceived</span> <span class="p">+=</span> <span class="k">async</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">Message</span><span class="p">.</span><span class="n">Text</span> <span class="p">==</span> <span class="n">container</span><span class="p">.</span><span class="n">Questions</span><span class="p">[</span><span class="n">rand</span><span class="p">].</span><span class="n">answer</span><span class="p">)</span> 
                <span class="k">await</span> <span class="n">f</span><span class="p">.</span><span class="n">Channel</span><span class="p">.</span><span class="n">SendMessage</span><span class="p">(</span><span class="s">&quot;Congratulations &quot;</span> <span class="p">+</span> <span class="n">f</span><span class="p">.</span><span class="n">Message</span><span class="p">.</span><span class="n">User</span> <span class="p">+</span> <span class="s">&quot;!&quot;</span><span class="p">);</span>
        <span class="p">};</span>
    <span class="p">});</span>
</code></pre></div>


<p>The name of the command is 'trivia', while the alias is 'question'. For this bot, the prefix is set to the character '!'. In addition, the user can input some parameters to the command, such as a category ID and a value. When the users enters e.g. '!question Food 200' into the discord chat, the method will execute. A random question will be fetched and displayed and then the method hooks into the MessageReceived event handler, which is triggered whenever a user enter a message. A conditional statement checks whether the message was the correct answer to the question. If true, a message congratulating the user is shown. 
s
New command can be added in the same manner as shown above. The full documentation for the .NET wrapper can be found <a href="https://docs.stillu.cc/guides/getting_started/first-bot.html">here</a>.</p></p>
     </div>
 </div>
</div>
</div>
<!-- End of Main Content --> 
   
    
<!--  Footer   -->
    <div class="container" id="footer">
        <ul>
            <li>
                <a href="mailto:thomb@hotmail.dk">
                    <img src="theme/img/email.png" style="height:30px" class="icon">
                </a> 
            
            </li>   
            <li><b>|</b></li>
            <li>                
                <a target="_blank" href="https://www.linkedin.com/in/thomas-brunbjerg-8a6ba8137/">
                    <img src="theme/img/linkedin.jpg" style="height:30px" class="icon">
                </a> 
            </li>
            <li><b>|</b></li>
                <li>
                <a target="_blank" href="https://github.com/ThomB93">
                    <img src="theme/img/github.png" style="height:30px" class="icon">
                </a>
            </li>
            <li><b>|</b></li>
                <li>
                <a target="_blank" href="https://www.youtube.com/channel/UC3rc5zj8sLo_HiPXCxb0y4g">
                    <img src="theme/img/youtube.png" style="height:30px" class="icon">
                </a>
            </li>
        </ul>
    </div>
    
<!--  End Footer  -->
    
</body>
</html>